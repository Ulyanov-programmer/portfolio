import{elementsIsExist as l}from"./general.js";import"../scroll-timeline.js";const a=class{constructor(e,...t){if(a.repeatingAnimations=e.repeatingAnimations,t.length<=0){console.error("[AnimateByScroll] No one AnimationGroup or AnimationTimeline have been created.");return}e.activeAnimationClass&&(a.activeAnimationClass=e.activeAnimationClass)}};let i=a;i.repeatingAnimations=!1,i.activeAnimationClass="active";export{i as default};export class AnimationGroup{constructor(e,...t){l(e.selectors)==!1&&console.log("[AnimationGroup] Element is not exist!"),this.htmlElements=document.querySelectorAll(e.selectors);for(let n of this.htmlElements)n.setAttribute("data-timeout",e.timeoutBeforeStart.toString()),n.setAttribute("data-view-start-coeff",e.animateStartCoeff.toString());this.defTimeoutBeforeStart=e.timeoutBeforeStart,this.defAnimStartCoeffs=e.animateStartCoeff,this.mediaQueries=t,this.setMediaProperties(),this.createIntersectionObserver(),window.addEventListener("resize",()=>{this.setMediaProperties()},!1)}setMediaProperties(){if(!(this.mediaQueries.length<=0))for(let e of this.mediaQueries)if(window.outerWidth<=e.activationWitdh)for(let t of this.htmlElements)t.setAttribute("data-timeout",e.timeoutBeforeStart.toString()),t.setAttribute("data-view-start-coeff",e.defAnimStartCoeffs.toString());else for(let t of this.htmlElements)t.setAttribute("data-timeout",this.defTimeoutBeforeStart.toString()),t.setAttribute("data-view-start-coeff",this.defAnimStartCoeffs.toString())}createIntersectionObserver(){let e={threshold:this.defAnimStartCoeffs},t=function(o){for(let s of o){let r=s.target;s.isIntersecting&&!r.classList.contains(i.activeAnimationClass)?(setTimeout(()=>{r.classList.add(i.activeAnimationClass)},parseInt(r.dataset.timeout)),i.repeatingAnimations==!1&&n.unobserve(s.target)):s.isIntersecting==!1&&i.repeatingAnimations&&r.classList.remove(i.activeAnimationClass)}};const n=new IntersectionObserver(t,e);for(let o of this.htmlElements)n.observe(o)}}export class AnimationMediaQuery{constructor(e,t,n){this.activationWitdh=e,this.defAnimStartCoeffs=t,this.timeoutBeforeStart=n}}export class AnimationTimeline{constructor(e){l(e.selectors)==!1&&console.log("[AnimationTimeline] No one element is exist!"),this.animatedElements=document.querySelectorAll(e.selectors),this.animatedProperties=e.animatedProperties,this.animateSettings=e.animateSettings,this.setDefaultanimateSettingsIfNull(e.animateSettings);for(let t of this.animatedElements)t.animate(this.animatedProperties,this.animateSettings)}setDefaultanimateSettingsIfNull(e){e.fill||(e.fill="forwards")}}
