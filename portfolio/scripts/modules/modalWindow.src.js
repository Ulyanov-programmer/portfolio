import{elementIsExistWithLog as i,returnScrollbarWidth as r}from"./general.js";export default class l{constructor(e){this.modalWindowSelector=".modal-window";this.modalWindowContentClass="modal-window__body";this.modalWindowActiveSelector=".modal-window.active";if(!!i("ModalWindowMenu",e.modalLinksSelector,e.modalClosersSelector)){e.burgerMenuSelector&&(l.burgerMenuClasslist=document.querySelector(e.burgerMenuSelector).classList),l.modalLinks=document.querySelectorAll(e.modalLinksSelector);for(let t of l.modalLinks)t.addEventListener("click",()=>{let o=t.dataset.openModalId;if(o){let s=document.getElementById(o);this.showOrHideModal(s)}});l.modalElements=document.querySelectorAll(this.modalWindowSelector);for(let t of l.modalElements)t.addEventListener("click",o=>{o.target.classList.contains(this.modalWindowContentClass)&&this.closeActiveModal(!0)});l.modalClosers=document.querySelectorAll(e.modalClosersSelector);for(let t of l.modalClosers)t.addEventListener("click",()=>this.closeActiveModal());e.disableOnEsc&&document.addEventListener("keydown",t=>{if(t.code!="Escape")return;this.getCurrentActiveModal()&&this.closeActiveModal()})}}showOrHideModal(e){let t=this.getCurrentActiveModal();t?this.closeActiveModal(!1,t):this.toggleBodyScroll(!1),e.classList.add("active")}closeActiveModal(e=!0,t){t==null&&(t=this.getCurrentActiveModal()),t.classList.remove("active"),e&&this.toggleBodyScroll(!0)}toggleBodyScroll(e){this.chekPossibileSwitchScroll(e)?(document.body.style.paddingRight="",document.body.style.overflow=""):(document.body.style.paddingRight=r()+"px",document.body.style.overflow="hidden")}getCurrentActiveModal(){return document.querySelector(this.modalWindowActiveSelector)}chekPossibileSwitchScroll(e){return l.burgerMenuClasslist?!!(!l.burgerMenuClasslist.contains("active")&&e):e}}
